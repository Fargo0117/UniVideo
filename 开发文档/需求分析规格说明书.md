# 需求分析规格说明书

**目录**
(请保留原Word模板中的自动目录)

---

## 1. 引言

### 1.1 编写目的

本文档详细描述了 **UniVideo（校园视界）** 系统的功能需求、性能需求、数据需求及运行环境。其编写目的是为了明确系统“做什么”，界定系统功能边界，为后续的系统设计、编码实现、测试验收提供统一的标准和依据。
预期的读者包括：

* 项目开发人员（李梓豪）
* 软件测试人员
* 软件工程课程设计指导教师

### 1.2 背景

* **a. 待开发的软件系统的名称：** UniVideo 校园视界（校园视频分享平台）
* **b. 本项目的任务提出者：** 软件工程课程设计指导教师
* **开发者：** 软件工程234班 李梓豪 (学号: 2318140407)
* **用户：** 大连交通大学全校师生、系统管理员


* **c. 该软件系统同其他系统或其他机构的基本的相互来往关系：** 本系统独立运行，不依赖外部第三方账号体系。系统运行于校园局域网或互联网环境，通过 HTTP 协议与客户端浏览器进行数据交互。

### 1.3 定义

* **RBAC (Role-Based Access Control)：** 基于角色的访问控制。本系统分为普通用户（User）和管理员（Admin）两种角色，拥有不同的操作权限。
* **Pre-audit（先审后发）：** 指视频上传后默认状态不可见，必须经管理员后台审核通过后，方可在前台展示的机制。
* **Nested Comment（盖楼/嵌套评论）：** 指评论区支持对已有评论进行回复，形成树状结构的交流形式。
* **Canvas Snapshot（前端截图）：** 指利用 HTML5 Canvas 技术在浏览器端截取视频当前帧作为封面的技术。

### 1.4 参考资料

* **a.** 《软件工程课程设计指导书》，大连交通大学软件工程教研室，2025。
* **b.** UniVideo 系统《可行性分析与开发计划》。
* **c.** GB/T 8567-2006 《计算机软件文档编制规范》。
* **d.** Vue.js 3.0 官方文档、Flask 2.0 官方文档。

## 2. 任务概述

### 2.1 目标

本系统的开发意图是构建一个基于 B/S 架构的校园视频资源管理与分享平台，旨在解决当前校园内视频文件（如课程录像、社团活动、新闻资讯）存储分散、传播困难、缺乏互动的问题。
本软件产品是一项独立的 Web 应用系统，全部内容自含。前端通过 RESTful API 与后端进行通信，数据库负责持久化存储。

### 2.2 用户的特点

* **普通用户（学生/教师）：**
* **特点：** 数量庞大，计算机操作水平参差不齐。
* **预期频度：** 每天高频访问。
* **需求：** 界面必须直观简洁，视频加载速度快，上传操作简单（如支持自动截图封面）。


* **系统管理员：**
* **特点：** 数量较少，具备一定的系统维护知识。
* **预期频度：** 每天定期访问后台。
* **需求：** 审核效率高，能快速检索和处理违规内容。



### 2.3 假定和约束

* **开发期限：** 2周（14天）。
* **技术约束：** 后端采用 Python (Flask) 框架，前端采用 Vue.js 框架，数据库采用 MySQL。
* **硬件约束：** 受限于实验环境，视频文件存储于服务器本地文件系统，不使用云对象存储服务。
* **网络约束：** 假设用户处于稳定的网络环境中，带宽足以支持 720P 视频流播放。

### 2.4 可行性分析

根据《可行性分析与开发计划》，本项目在技术上利用成熟的 Web 开发栈实现；经济上零成本；法律上通过审核机制规避版权和合规风险。因此项目完全可行。

## 3. 需求规定

### 3.1 对功能的规定

本系统主要划分为 **用户前台** 和 **管理后台** 两个子系统。以下采用 IPO（输入-处理-输出）描述主要功能需求：

#### 3.1.1 用户认证模块

| 功能名称 | 输入 | 处理逻辑 | 输出 |
| --- | --- | --- | --- |
| **用户注册** | 学号、昵称、密码 | 校验学号唯一性，密码进行 Hash 加密存储 | 注册成功提示，跳转登录页 |
| **用户登录** | 学号、密码 | 校验账号密码匹配度，生成 JWT Token | 返回 Token 及用户信息，跳转首页 |
| **个人资料修改** | 新头像、新昵称、新密码 | 校验旧密码（如改密），更新数据库记录 | 更新成功提示，界面刷新 |

#### 3.1.2 视频业务模块

| 功能名称 | 输入 | 处理逻辑 | 输出 |
| --- | --- | --- | --- |
| **视频上传** | 视频文件(MP4)、封面图(可选)、标题、分类 | 1. 保存文件到本地；<br>

<br>2. 若无封面则调用 Canvas 截图；<br>

<br>3. 判别角色：管理员直接发布，普通用户置为待审核。 | 上传成功提示，状态反馈 |
| **视频浏览** | 点击分类标签或翻页 | 根据分类 ID 和页码查询 `status=1` 的视频列表 | 视频卡片列表（含封面、标题、作者） |
| **视频搜索** | 搜索关键词 | 模糊匹配视频标题，且过滤掉未发布视频 | 符合条件的视频列表 |
| **视频播放** | 点击视频卡片 | 加载视频流地址，增加播放量计数 | 视频播放器界面，自动起播 |

#### 3.1.3 社区互动模块

| 功能名称 | 输入 | 处理逻辑 | 输出 |
| --- | --- | --- | --- |
| **发表评论** | 评论内容、父评论ID(可选) | 1. 识别是主评还是回复；<br>

<br>2. 关联 Root ID；<br>

<br>3. 写入数据库。 | 评论列表实时更新显示新评论 |
| **点赞/收藏** | 点击对应按钮 | 查询关联表，若已存在则删除（取消），不存在则新增 | 按钮状态改变（亮/灰），数字更新 |
| **查看收藏** | 进入个人中心 | 查询 `collections` 关联表数据 | 我收藏的视频列表 |

#### 3.1.4 后台管理模块

| 功能名称 | 输入 | 处理逻辑 | 输出 |
| --- | --- | --- | --- |
| **视频审核** | 点击通过/驳回 | 修改视频记录的 `status` 字段（1或2） | 列表移除该条目，前台状态变更 |
| **视频删除** | 点击删除按钮 | 1. 删除数据库记录；<br>

<br>2. 物理删除磁盘上的视频和封面文件。 | 删除成功提示，列表刷新 |
| **全站检索** | 关键词 | 忽略状态字段，全量搜索所有视频 | 包含待审核/已发布的搜索结果 |

### 3.2 对性能的规定

#### 3.2.1 精度

* **时间精度：** 视频播放进度精确到秒。
* **数据精度：** 播放量、点赞数精确到个位，金额涉及为 0。

#### 3.2.2 时间特性要求

* **a. 响应时间：** 页面加载时间 < 1秒；API 接口平均响应时间 < 200毫秒。
* **b. 视频起播时间：** 在局域网环境下，点击播放后缓冲时间 < 3秒。
* **c. 搜索响应：** 关键词搜索结果返回时间 < 0.5秒。

#### 3.2.3 灵活性

* **a. 运行环境的变化：** 前端采用响应式布局，应能适应不同分辨率的 PC 浏览器窗口。
* **b. 接口变化：** 后端 API 设计遵循 RESTful 规范，具备版本扩展能力（如 `/api/v1/`）。

### 3.3 输入输出要求

* **视频输入：** 格式限制为 MP4，单文件大小建议 < 500MB。
* **图片输入：** 格式支持 JPG/PNG，单文件大小 < 5MB。
* **API 输出：** 统一采用 JSON 格式，结构示例：`{ "code": 200, "msg": "success", "data": {...} }`。
* **异常输出：** 当发生错误时，需返回清晰的错误码和用户可读的提示信息（如“账号不存在”而非“404 Not Found”）。

### 3.4 数据管理能力要求

* **数据库表结构：** 系统设计六张核心表：users（用户）、categories（分类）、videos（视频）、comments（评论）、likes（点赞）、collections（收藏）。
* **规模估算：**
  * 用户表：预估支持 1000+ 用户。
  * 视频表：预估支持 5000+ 视频记录。
  * 评论/点赞/收藏表：预估支持 10万+ 交互记录。


* **存储要求：** 随着视频数量增长，需预留 TB 级硬盘空间。数据库需定期备份。

### 3.5 故障处理要求

* **网络中断：** 前端应提示“网络连接异常”，并允许用户点击重试。
* **上传失败：** 若因文件过大或格式错误导致上传中断，系统应通过 HTTP 状态码（413/415）反馈具体原因，严禁导致服务器崩溃。
* **数据库宕机：** 后端应捕获连接异常，向前端返回“服务暂不可用”提示。

### 3.6 其他专门要求

* **安全保密：** 用户密码必须加盐哈希（采用 Werkzeug 的 pbkdf2:sha256 算法）存储，不可明文存储。所有管理接口必须校验 Admin 权限 Token。
* **易用性：** 视频上传支持拖拽操作；视频封面支持自动截取，减少用户操作步骤。

## 4. 运行环境规定

### 4.1 设备

* **服务器端：**
* **a. 处理器：** Intel Core i5 或同级以上 CPU。
* **b. 内存：** 建议 8GB 或以上。
* **c. 外存：** 建议 512GB SSD，用于存储视频文件。


* **客户端：**
* 任何安装有现代浏览器的 PC 或笔记本电脑（推荐 Chrome 80+, Edge, Firefox）。



### 4.2 支持软件

* **操作系统：** Windows 10/11, macOS, 或 Linux (Ubuntu/CentOS)。
* **数据库系统：** MySQL 8.0 Community Edition。
* **开发语言环境：** Python 3.8+, Node.js 16+ (开发阶段)。
* **Web 服务器：** Nginx (生产环境) 或 Flask Built-in Server (测试环境)。

### 4.3 接口

* **通信协议：** HTTP/1.1 (未来可升级 HTTPS)。
* **数据交换：** 前后端完全分离，通过 JSON 格式交换数据。

### 4.4 控制

* **会话控制：** 系统采用 JWT (JSON Web Token) 进行无状态会话管理。Token 存储于客户端 LocalStorage 中，每次请求通过 HTTP Header (`Authorization`) 发送给后端进行校验。
* **并发控制：** 数据库采用 InnoDB 引擎，利用行级锁处理高并发下的点赞与评论写入。